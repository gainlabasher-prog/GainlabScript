# S方法 - 样式设置

## 📋 S方法概述

**S方法（Style Method）**用于定义脚本的可设置样式，在图表设置面板中显示供用户自定义图形外观，实现个性化的指标显示效果。

### 🎯 核心特点
- 🎨 **可视化定制** - 用户可在设置面板中调整所有样式
- 🔄 **实时预览** - 样式变更后图表立即更新显示
- 🎭 **类型丰富** - 支持颜色、线条、图形、标签等多种样式
- 📱 **响应式设计** - 自动适配不同屏幕和缩放级别

### ⚠️ 核心约束
- **🚫 禁止使用变量**: S方法中初始值必须是常量
- **✅ 必须在脚本开头**: S方法定义必须在D方法之前
- **✅ 支持运行时修改**: 可在脚本中修改S方法返回的样式对象属性

## 🎭 S方法分类体系

S方法分为 **基础样式方法** 和 **组合样式方法** 两大类：

### 🔧 基础样式方法
返回单个样式属性，用于自由组合：

| 方法 | 用途 | 返回值 | 使用频率 |
|------|------|--------|---------|
| [S.color()](#S.color) | 颜色定义 | string | 📊 中等 |
| [S.width()](#S.width) | 线宽定义 | number | 📊 中等 |
| [S.size()](#S.size) | 尺寸定义 | number | 📊 中等 |
| [S.style()](#S.style) | 线型定义 | string | 📊 中等 |
| [S.full()](#S.full) | 填充方式 | string | 📊 中等 |
| [S.icon()](#S.icon) | 图形类型 | string | 📊 中等 |

### 🎨 组合样式方法
返回完整样式对象，可直接用于绘图：

| 方法 | 用途 | 适用绘图方法 | 使用频率 |
|------|------|-------------|---------|
| [S.line()](#S.line) | 线条样式 | D.line() | 🔥 极高 |
| [S.bar()](#S.bar) | 柱状图样式 | D.bar() | 🔥 极高 |
| [S.area()](#S.area) | 区域填充样式 | D.area() | 🔥 高 |
| [S.candle()](#S.candle) | K线样式 | D.candle() | 📊 高 |
| [S.shape()](#S.shape) | 图形标记样式 | D.shape() | 📊 高 |
| [S.label()](#S.label) | 文本标签样式 | D.label() | 📊 高 |
| [S.labelbg()](#S.labelbg) | 标签背景样式 | D.label()背景 | 📊 高 |
| [S.rect()](#S.rect) | 矩形样式 | D.rect() | 📝 中等 |
| **屏幕坐标专用样式** ||||
| [S.slabel()](#S.slabel) | 屏幕标签样式 | D.slabel() | 📝 中等 |
| [S.sarea()](#S.sarea) | 屏幕区域样式 | D.sarea() | 📝 中等 |
| [S.srect()](#S.srect) | 屏幕矩形样式 | D.srect() | 📝 中等 |
| [S.scircle()](#S.scircle) | 屏幕圆形样式 | D.scircle() | 📝 中等 |
| [S.sshape()](#S.sshape) | 屏幕图形样式 | D.sshape() | 📝 中等 |

## 🎨 基础样式方法

### S.color() - 颜色定义

定义**颜色**可设置变量，在设置面板中显示为颜色选择器。

#### 语法格式
```javascript
color = S.color(defaultValue, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| `defaultValue` | string | ✅ | 默认颜色值 | `'#FF0000'`, `'rgb(255,0,0)'`, `'rgba(255,0,0,0.5)'` |
| `title` | string | ❌ | 显示名称 | `'主色调'`, `'背景色'` |
| `tip` | string | ❌ | 提示说明 | `'选择线条颜色'` |

#### 支持的颜色格式
```javascript
// ✅ 十六进制格式
color1 = S.color('#FF0000', '红色')     // 纯红色
color2 = S.color('#ff0000', '红色')     // 小写也支持
color3 = S.color('#F00', '红色简写')    // 三位简写

// ✅ RGB格式  
color4 = S.color('rgb(255, 0, 0)', 'RGB红色')
color5 = S.color('rgba(255, 0, 0, 0.5)', '半透明红色')

// ✅ 命名颜色（部分支持）
color6 = S.color('red', '命名红色')
color7 = S.color('blue', '蓝色')

// ❌ 不支持的格式
// color8 = S.color('hsl(0, 100%, 50%)')  // HSL格式不支持
```

#### 基础示例
```javascript
// 简单用法
upColor = S.color('#00FF00', '上涨色')
downColor = S.color('#FF0000', '下跌色')

// 带透明度
fillColor = S.color('rgba(255, 100, 100, 0.2)', '填充色', '半透明填充颜色')
```

### S.width() - 线宽定义

定义**线宽**可设置变量，在设置面板中显示为线宽选择器。

#### 语法格式
```javascript
width = S.width(defaultValue, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| `defaultValue` | number | ✅ | 默认线宽（1-6） | `1`, `2`, `3` |
| `title` | string | ❌ | 显示名称 | `'线宽'`, `'粗细'` |
| `tip` | string | ❌ | 提示说明 | `'设置线条粗细'` |

#### 示例
```javascript
thinWidth = S.width(1, '细线')
normalWidth = S.width(2, '普通线宽')  
thickWidth = S.width(3, '粗线', '较粗的线条')
```

### S.size() - 尺寸定义

定义**尺寸**可设置变量，用于图形大小、字体大小等。

#### 语法格式
```javascript
size = S.size(defaultValue, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| `defaultValue` | number | ✅ | 默认尺寸值 | `12`, `16`, `20` |
| `title` | string | ❌ | 显示名称 | `'图形大小'`, `'字号'` |
| `tip` | string | ❌ | 提示说明 | `'设置图形尺寸'` |

#### 示例
```javascript
fontSize = S.size(12, '字号', '文字大小')
shapeSize = S.size(8, '图形尺寸', '图标大小') 
iconSize = S.size(16, '图标大小')
```

### S.style() - 线型定义

定义**线型**可设置变量，支持实线、虚线、点线。

#### 语法格式
```javascript
style = S.style(defaultValue, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| `defaultValue` | string | ✅ | 线型类型 | `'solid'`, `'dashed'`, `'dotted'` |
| `title` | string | ❌ | 显示名称 | `'线型'`, `'样式'` |
| `tip` | string | ❌ | 提示说明 | `'选择线条样式'` |

#### 支持的线型
- `'solid'` - 实线（默认）
- `'dashed'` - 虚线
- `'dotted'` - 点线

#### 示例
```javascript
solidStyle = S.style('solid', '实线')
dashedStyle = S.style('dashed', '虚线', '虚线样式')
dottedStyle = S.style('dotted', '点线')
```

### S.full() - 填充方式定义

定义**填充方式**可设置变量，控制图形的填充或描边。

#### 语法格式
```javascript
full = S.full(defaultValue, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| `defaultValue` | string | ✅ | 填充方式 | `'fill'`, `'stroke'` |
| `title` | string | ❌ | 显示名称 | `'填充'`, `'样式'` |
| `tip` | string | ❌ | 提示说明 | `'填充或描边'` |

#### 支持的填充方式
- `'fill'` - 填充（实心）
- `'stroke'` - 描边（空心）

#### 示例
```javascript
fillMode = S.full('fill', '填充')
strokeMode = S.full('stroke', '描边', '只显示边框')
```

### S.icon() - 图形类型定义

定义**图形类型**可设置变量，用于选择标记图形。

#### 语法格式
```javascript
icon = S.icon(defaultValue, title?, tip?)
```

#### 支持的图形类型
- `'arrowUp'` - 上箭头
- `'arrowDown'` - 下箭头
- `'arrowLeft'` - 左箭头
- `'arrowRight'` - 右箭头
- `'triangleUp'` - 上三角
- `'triangleDown'` - 下三角
- `'triangleLeft'` - 左三角
- `'triangleRight'` - 右三角
- `'circle'` - 圆形
- `'square'` - 方形
- `'diamond'` - 菱形
- `'star'` - 星形
- `'cross'` - 十字
- `'flag'` - 旗子
- `'heart'` - 心形
- `'x'` - X形
- `'check'` - 对勾

#### 示例
```javascript
buyIcon = S.icon('arrowUp', '买入图标')
sellIcon = S.icon('arrowDown', '卖出图标')
alertIcon = S.icon('star', '提醒图标', '重要信号标记')
```

## 🎨 组合样式方法

### S.line() - 线条样式

定义**线条样式**，包含颜色、粗细、线型等完整样式信息。

#### 语法格式
```javascript
style = S.line(color, size?, style?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 线条颜色 |
| `size` | number | ❌ | `1` | 线宽（1-6） |
| `style` | string | ❌ | `'solid'` | 线型 |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 返回值结构
```javascript
{
    color: string,    // 颜色
    size: number,     // 线宽
    style: string,    // 线型
    show: boolean     // 是否显示
}
```

#### 基础示例
```javascript
// 简单用法
mainLine = S.line('#FF6600', '主线')
signalLine = S.line('#00FF00', 2, '信号线')

// 完整参数用法
maLine = S.line('#FF6600', 2, 'solid', true, 'MA线', '移动平均线样式')
```

#### 实用示例 - 多线指标
```javascript
//@name=三线MA
//@position=main  
//@version=1

// 参数定义
fast = I.int(5, '快线周期')
medium = I.int(20, '中线周期') 
slow = I.int(60, '慢线周期')

// 样式定义
fastStyle = S.line('#FF0000', 1, 'solid', title='快线样式')
mediumStyle = S.line('#00FF00', 2, 'solid', title='中线样式')
slowStyle = S.line('#0000FF', 3, 'solid', title='慢线样式')

// 计算和绘制
D.line(F.ma(dataList, fast, 'close'), fastStyle)
D.line(F.ma(dataList, medium, 'close'), mediumStyle)
D.line(F.ma(dataList, slow, 'close'), slowStyle)
```

### S.bar() - 柱状图样式

定义**柱状图样式**，用于绘制柱状图表。

#### 语法格式
```javascript
style = S.bar(color, full?, size?, style?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 柱子颜色 |
| `full` | string | ❌ | `'fill'` | 填充方式 |
| `size` | number | ❌ | `1` | 边框线宽（仅stroke时有效） |
| `style` | string | ❌ | `'solid'` | 边框线型（仅stroke时有效） |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 返回值结构
```javascript
{
    color: string,    // 颜色
    full: string,     // 填充方式
    size: number,     // 边框线宽
    style: string,    // 边框线型  
    show: boolean     // 是否显示
}
```

#### 示例
```javascript
// 基础柱状图样式
volBarStyle = S.bar('#4CAF50', 'fill', title='成交量柱')

// MACD柱状图样式
macdUpBar = S.bar('#00FF00', 'stroke', title='多头柱')
macdDownBar = S.bar('#FF0000', 'fill', title='空头柱')

// 完整参数
customBar = S.bar('#2196F3', 'stroke', 2, 'dashed', true, '自定义柱', '虚线边框柱状图')
```

### S.area() - 区域填充样式

定义**区域填充样式**，用于填充两条线之间的区域。

#### 语法格式
```javascript
style = S.area(color, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 填充颜色 |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 示例
```javascript
// 基础区域填充
trendFill = S.area('rgba(255, 100, 100, 0.2)', '趋势填充')

// 布林带填充
bollFill = S.area('rgba(0, 100, 255, 0.1)', true, '布林填充', '上下轨之间填充')
```

### S.shape() - 图形标记样式

定义**图形标记样式**，用于在图表上绘制各种标记图形。

#### 语法格式
```javascript
style = S.shape(icon, color, size?, position?, full?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `icon` | string | ✅ | - | 图形类型 |
| `color` | string | ✅ | - | 图形颜色 |
| `size` | number | ❌ | `12` | 图形尺寸 |
| `position` | string | ❌ | `'value'` | 位置定位 |
| `full` | string | ❌ | `'fill'` | 填充方式 |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### position 位置选项
- `'value'` - 数值位置
- `'high'` - 最高价位置
- `'low'` - 最低价位置
- `'open'` - 开盘价位置
- `'close'` - 收盘价位置
- `'highUp'` - 最高价上方
- `'lowDown'` - 最低价下方
- `'top'` - 图表顶部
- `'bottom'` - 图表底部
- `'center'` - 图表中心

#### 示例
```javascript
// 买卖信号
buySignal = S.shape('arrowUp', '#00FF00', 12, 'lowDown', 'fill', title='买入信号')
sellSignal = S.shape('arrowDown', '#FF0000', 12, 'highUp', 'fill', title='卖出信号')

// 支撑阻力标记
supportMark = S.shape('circle', '#4CAF50', 8, 'low', 'fill', title='支撑点')
resistanceMark = S.shape('circle', '#F44336', 8, 'high', 'stroke', title='阻力点')
```

### S.label() - 文本标签样式

定义**文本标签样式**，用于在图表上显示文字信息。

#### 语法格式
```javascript
style = S.label(color, size?, align?, position?, bold?, italic?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 文字颜色 |
| `size` | number | ❌ | `12` | 字体大小 |
| `align` | string | ❌ | `'left'` | 文字对齐 |
| `position` | string | ❌ | `'value'` | 位置定位 |
| `bold` | string | ❌ | - | 是否加粗（`'bold'`） |
| `italic` | string | ❌ | - | 是否斜体（`'italic'`） |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### align 对齐选项
- `'left'` - 左对齐
- `'center'` - 居中对齐
- `'right'` - 右对齐

#### 示例
```javascript
// 基础标签
priceLabel = S.label('#FFFFFF', 12, 'center', 'value', title='价格标签')

// 加粗斜体标签
importantLabel = S.label('#FF0000', 14, 'center', 'highUp', 'bold', 'italic', 
                        true, '重要提示', '加粗斜体的重要信息')

// 位置定制标签
bottomLabel = S.label('#00FF00', 10, 'left', 'bottom', title='底部信息')
```

### S.labelbg() - 标签背景样式

定义**标签背景样式**，与S.label()配合使用提供背景效果。

#### 语法格式
```javascript
style = S.labelbg(color, full?, size?, style?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 背景颜色 |
| `full` | string | ❌ | `'fill'` | 填充方式 |
| `size` | number | ❌ | `1` | 边框线宽 |
| `style` | string | ❌ | `'solid'` | 边框线型 |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 示例
```javascript
// 半透明背景
labelBg = S.labelbg('rgba(0, 0, 0, 0.6)', 'fill', title='标签背景')

// 边框背景
borderBg = S.labelbg('#FFFFFF', 'stroke', 2, 'solid', title='边框背景')

// 与标签配合使用
textStyle = S.label('#FFFFFF', 12, 'center', 'value', title='文字')
bgStyle = S.labelbg('rgba(255, 0, 0, 0.8)', 'fill', title='红色背景')

// 在D方法中使用
D.label(labelData, textStyle, bgStyle)
```

### S.rect() - 矩形样式

定义**矩形样式**，用于绘制矩形图形。

#### 语法格式
```javascript
style = S.rect(color, full?, size?, style?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 矩形颜色 |
| `full` | string | ❌ | `'fill'` | 填充方式 |
| `size` | number | ❌ | `1` | 边框线宽（仅stroke时有效） |
| `style` | string | ❌ | `'solid'` | 边框线型（仅stroke时有效） |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 示例
```javascript
// 基础矩形样式
rectStyle = S.rect('#5B8FF9', 'fill', title='矩形样式')

// FVG区域矩形
bullishFVG = S.rect('rgba(0, 255, 0, 0.3)', 'fill', title='看涨FVG')
bearishFVG = S.rect('rgba(255, 0, 0, 0.3)', 'fill', title='看跌FVG')

// 描边矩形
borderRect = S.rect('rgba(255, 0, 0, 0.3)', 'stroke', 2, 'solid', title='边框矩形')
```

### S.candle() - 蜡烛图样式

定义**蜡烛图样式**，用于绘制K线蜡烛图。

#### 语法格式
```javascript
style = S.candle(color, full?, size?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 蜡烛颜色 |
| `full` | string | ❌ | `'fill'` | 填充方式 |
| `size` | number | ❌ | `1` | 线宽 |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 示例
```javascript
// 上升蜡烛
upCandle = S.candle('#00FF41', 'stroke', 1, title='上升')

// 下降蜡烛
downCandle = S.candle('#FF3333', 'fill', 1, title='下降')
```

## 🖥️ 屏幕坐标专用样式方法

### S.slabel() - 屏幕相对标签样式

定义**屏幕相对标签/文字**样式，与S.label()基本一致，但**没有position**属性，专用于draw.slabel()方法。

#### 语法格式
```javascript
style = S.slabel(color, size?, align?, bold?, italic?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ✅ | - | 文字颜色 |
| `size` | number | ❌ | `12` | 字体大小 |
| `align` | string | ❌ | `'left'` | 文字对齐 |
| `bold` | string | ❌ | - | 是否加粗（`'bold'`） |
| `italic` | string | ❌ | - | 是否斜体（`'italic'`） |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 运行时属性
样式对象创建后，可在脚本中手动添加以下属性：
- `text` - 文本内容
- `x` - X轴偏移
- `y` - Y轴偏移

#### 示例
```javascript
labelStyle = S.slabel('#fff', 14, 'left', title='标签样式')
labelStyle.text = '提示文本'
labelStyle.x = 10
labelStyle.y = -5

D.slabel({x:'right', y:'top', text:'提示'}, labelStyle)
```

### S.sarea() - 屏幕相对区域样式

定义**屏幕相对多边形/区域**样式，与S.area()基本一致，但**添加border**等属性，专用于draw.sarea()方法。

#### 语法格式
```javascript
style = S.sarea(color?, border?, size?, style?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ❌ | - | 填充颜色 |
| `border` | string | ❌ | - | 边框颜色（`border='颜色值'`） |
| `size` | number | ❌ | `1` | 边框线宽（仅有border时有效） |
| `style` | string | ❌ | `'solid'` | 边框线型（仅有border时有效） |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

**注意**：
- `color`为填充颜色，不设置为不显示填充，只显示边框
- `border`设置格式为`border='颜色值'`，不设置为不显示边框

#### 示例
```javascript
// 纯填充多边形
sarea1 = S.sarea('rgba(255,0,0,0.1)', title='多边形1')

// 带边框的填充多边形
sarea2 = S.sarea('rgba(255,0,0,0.1)', border='#F00', 1, title='多边形2')

// 纯边框多边形
sarea3 = S.sarea(border='#F00', 1, title='多边形3')
```

### S.srect() - 屏幕相对矩形样式

定义**屏幕相对矩形**样式，与S.rect()基本一致，但**添加border**等属性，专用于draw.srect()方法。

#### 语法格式
```javascript
style = S.srect(color?, border?, size?, style?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ❌ | - | 填充颜色 |
| `border` | string | ❌ | - | 边框颜色（`border='颜色值'`） |
| `size` | number | ❌ | `1` | 边框线宽（仅有border时有效） |
| `style` | string | ❌ | `'solid'` | 边框线型（仅有border时有效） |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

**注意**：
- `color`为填充颜色，不设置为不显示填充，只显示边框
- `border`设置格式为`border='颜色值'`，不设置为不显示边框

#### 示例
```javascript
// 纯填充矩形
srect1 = S.srect('rgba(255,0,0,0.1)', title='矩形1')

// 带边框的填充矩形
srect2 = S.srect('rgba(255,0,0,0.1)', border='#F00', 1, title='矩形2')

// 纯边框矩形
srect3 = S.srect(border='#F00', 1, title='矩形3')
```

### S.scircle() - 屏幕相对圆形样式

定义**屏幕相对圆形**样式，专用于draw.scircle()方法。

#### 语法格式
```javascript
style = S.scircle(color?, border?, size?, style?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `color` | string | ❌ | - | 填充颜色 |
| `border` | string | ❌ | - | 边框颜色（`border='颜色值'`） |
| `size` | number | ❌ | `1` | 边框线宽（仅有border时有效） |
| `style` | string | ❌ | `'solid'` | 边框线型（仅有border时有效） |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

**注意**：
- `color`为填充颜色，不设置为不显示填充，只显示边框
- `border`设置格式为`border='颜色值'`，不设置为不显示边框

#### 示例
```javascript
// 纯填充圆形
scircle1 = S.scircle('rgba(255,0,0,0.1)', title='圆形1')

// 带边框的填充圆形
scircle2 = S.scircle('rgba(255,0,0,0.1)', border='#F00', 1, title='圆形2')

// 纯边框圆形
scircle3 = S.scircle(border='#F00', 1, title='圆形3')
```

### S.sshape() - 屏幕相对图形样式

定义**屏幕相对图形**样式，与S.shape()基本一致，但**减少position**属性，专用于draw.sshape()方法。

#### 语法格式
```javascript
style = S.sshape(icon, color, size?, full?, show?, title?, tip?)
```

#### 参数详解
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `icon` | string | ✅ | - | 图形类型 |
| `color` | string | ✅ | - | 图形颜色 |
| `size` | number | ❌ | `12` | 图形尺寸 |
| `full` | string | ❌ | `'fill'` | 填充方式 |
| `show` | boolean | ❌ | `true` | 是否显示 |
| `title` | string | ❌ | - | 显示名称 |
| `tip` | string | ❌ | - | 提示说明 |

#### 示例
```javascript
// 屏幕图形标记
buySignal = S.sshape('arrowUp', '#00FF00', 12, 'fill', title='支撑区')
sellSignal = S.sshape('arrowDown', '#FF0000', 12, 'fill', title='压力区')

// 使用示例
D.sshape({x:'right', y:'bottom'}, buySignal)
```

## ✨ 高级样式技巧

### 1. 动态样式修改
S方法返回的样式对象可以在运行时修改：

```javascript
// 定义基础样式
lineStyle = S.line('#FF6600', 2, 'solid', title='动态线条')

// 在脚本中动态修改属性
if (someCondition) {
    lineStyle.color = '#00FF00';    // 改变颜色
    lineStyle.size = 3;             // 改变粗细
    lineStyle.style = 'dashed';     // 改变线型
}

D.line(data, lineStyle);
```

### 2. 位置微调
图形和标签支持x、y偏移：

```javascript
// 定义基础样式
buySignal = S.shape('arrowUp', '#00FF00', 12, 'lowDown', title='买入')

// 运行时设置偏移
buySignal.x = 5;    // 向右偏移5像素
buySignal.y = -10;  // 向上偏移10像素

D.shape(buyData, buySignal);
```

### 3. 背景样式高级设置
标签背景支持更多属性：

```javascript
labelBg = S.labelbg('rgba(0, 0, 0, 0.8)', 'fill', title='背景')

// 运行时设置圆角和内边距
labelBg.radius = 4;   // 圆角4像素
labelBg.padding = 8;  // 内边距8像素

D.label(textData, labelStyle, labelBg);
```

### 4. 渐变颜色效果
支持颜色数组实现渐变：

```javascript
// 创建渐变样式对象
gradientStyle = {
    color: ['#FF0000', '#00FF00', '#0000FF'],  // 颜色数组
    size: 2,
    style: 'solid',
    show: true
};

D.line(data, gradientStyle);
```

## 🚨 常见错误和解决方案

### 错误1：在S方法中使用变量
```javascript
// ❌ 错误代码
let defaultColor = '#FF0000';
lineStyle = S.line(defaultColor, 2);  // 报错！

// ✅ 正确代码
lineStyle = S.line('#FF0000', 2);     // 使用常量
```

### 错误2：参数顺序错误
```javascript
// ❌ 错误：参数顺序不对
lineStyle = S.line(2, '#FF0000');  // size在前，color在后，错误！

// ✅ 正确：color参数必须在第一位
lineStyle = S.line('#FF0000', 2);  // color在前，正确！
```

### 错误3：position值错误
```javascript
// ❌ 错误：position值不存在
shapeStyle = S.shape('circle', '#FF0000', 12, 'middle');  // 'middle'不是有效值

// ✅ 正确：使用正确的position值  
shapeStyle = S.shape('circle', '#FF0000', 12, 'center'); // 'center'是有效值
```

### 错误4：样式对象直接修改错误
```javascript
// ❌ 错误：试图修改不可修改的属性
lineStyle = S.line('#FF0000', 2);
lineStyle.newProperty = 'test';  // 无效，不会生效

// ✅ 正确：只修改支持的属性
lineStyle = S.line('#FF0000', 2);
lineStyle.color = '#00FF00';     // 有效
lineStyle.size = 3;              // 有效
```

## 💡 最佳实践建议

### 1. 样式命名规范
```javascript
// ✅ 推荐：语义化命名
upTrendLine = S.line('#00FF00', 2, title='上涨趋势线')
downTrendLine = S.line('#FF0000', 2, title='下跌趋势线')
buySignal = S.shape('arrowUp', '#4CAF50', 12, title='买入信号')
sellSignal = S.shape('arrowDown', '#F44336', 12, title='卖出信号')

// ❌ 不推荐：无意义命名
style1 = S.line('#00FF00', 2)
style2 = S.line('#FF0000', 2)
shape1 = S.shape('arrowUp', '#4CAF50', 12)
```

### 2. 颜色选择指导
```javascript
// ✅ 推荐：使用对比鲜明的颜色
upColor = '#00C851';      // 鲜绿色
downColor = '#FF4444';    // 鲜红色  
neutralColor = '#FFB300'; // 橙色

// ✅ 推荐：适当的透明度
fillColor = 'rgba(0, 200, 81, 0.2)';  // 20%透明度，不遮挡K线
alertBg = 'rgba(255, 68, 68, 0.8)';   // 80%不透明，突出显示

// ❌ 避免：对比度不够的颜色
badColor1 = '#CCCCCC';    // 太淡，不易看清
badColor2 = '#111111';    // 太深，与背景冲突
```

### 3. 尺寸设置合理化
```javascript
// ✅ 推荐：合理的尺寸设置
mainLine = S.line('#FF6600', 2);      // 主要线条用2像素
auxLine = S.line('#888888', 1);       // 辅助线条用1像素
signalShape = S.shape('arrowUp', '#00FF00', 10);  // 信号图形适中大小

// ❌ 避免：极端尺寸
tooThin = S.line('#FF6600', 0);       // 0像素看不见
tooThick = S.line('#FF6600', 10);     // 10像素太粗，影响图表
tooSmall = S.shape('circle', '#FF0000', 2);   // 2像素太小
tooBig = S.shape('circle', '#FF0000', 50);    // 50像素太大
```

## 🔗 相关内容

- **配合使用**: [D方法详解](06-绘图输出方法(D方法).md) - 学习如何使用这些样式绘图
- **参数定义**: [I方法详解](03-输入参数方法(I方法).md) - 样式也支持用户自定义
- **实际案例**: [脚本案例库](09-完整脚本案例库.md) - 查看样式在实际指标中的应用
- **错误处理**: [错误处理指南](10-错误处理和调试指南.md) - S方法常见错误解决
- **约束说明**: [重要规则汇总](01-重要规则汇总.md#S方法限制) - 详细约束条件

---
**提示**: 良好的样式设计能大大提升指标的可读性和用户体验，建议在满足功能需求的基础上，重视视觉效果的优化。
# Fæ–¹æ³• - è®¡ç®—å‡½æ•°

## ğŸ“‹ Fæ–¹æ³•æ¦‚è¿°

**Fæ–¹æ³•ï¼ˆFormula Methodï¼‰**æ˜¯GainLab Scriptçš„æ ¸å¿ƒï¼Œæä¾›64ä¸ªä¸“ä¸šçš„æŠ€æœ¯åˆ†æè®¡ç®—å‡½æ•°ï¼Œæ¶µç›–ç§»åŠ¨å¹³å‡ã€æŠ€æœ¯æŒ‡æ ‡ã€æ•°å­¦ç»Ÿè®¡ç­‰å„ä¸ªæ–¹é¢ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹
- ğŸ“Š **ä¸“ä¸šå…¨é¢** - æ¶µç›–æ‰€æœ‰ä¸»æµæŠ€æœ¯åˆ†ææŒ‡æ ‡
- âš¡ **é«˜æ€§èƒ½** - ä¼˜åŒ–çš„ç®—æ³•å®ç°ï¼Œæ”¯æŒå¤§é‡Kçº¿æ•°æ®
- ğŸ”’ **æ•°æ®å®‰å…¨** - è‡ªåŠ¨å¤„ç†nullå€¼å’Œè¾¹ç•Œæƒ…å†µ
- ğŸ›ï¸ **çµæ´»æ˜“ç”¨** - ç»Ÿä¸€çš„æ¥å£è®¾è®¡ï¼Œæ”¯æŒå¤šç§æ•°æ®æº

### âš ï¸ æ ¸å¿ƒçº¦æŸ
- **âœ… ä¸¥æ ¼å‚æ•°é¡ºåº** - å¿…é¡»æŒ‰æ–‡æ¡£æŒ‡å®šçš„å‚æ•°é¡ºåºè°ƒç”¨
- **âœ… æ•°æ®ç±»å‹åŒ¹é…** - ç¡®ä¿ä¼ å…¥æ­£ç¡®çš„æ•°æ®ç±»å‹  
- **âœ… å¤„ç†è¿”å›null** - Fæ–¹æ³•å¯èƒ½è¿”å›nullå€¼ï¼Œéœ€è¦é€‚å½“å¤„ç†
- **âœ… ä¸æ”¯æŒè‡ªå®šä¹‰å‡½æ•°** - åªèƒ½ä½¿ç”¨å®˜æ–¹æä¾›çš„Fæ–¹æ³•

## ğŸ—‚ï¸ Fæ–¹æ³•åˆ†ç±»ç´¢å¼•

### ğŸ“ˆ ç§»åŠ¨å¹³å‡ç±»ï¼ˆ16ä¸ªæ–¹æ³•ï¼‰
| æ–¹æ³• | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ | å¤æ‚åº¦ |
|------|------|---------|-------|
| [F.ma()](#F.ma) | ç®€å•ç§»åŠ¨å¹³å‡ | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.ema()](#F.ema) | æŒ‡æ•°ç§»åŠ¨å¹³å‡ | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.sma()](#F.sma) | å¹³æ»‘ç§»åŠ¨å¹³å‡ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.wma()](#F.wma) | åŠ æƒç§»åŠ¨å¹³å‡ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.rma()](#F.rma) | å¨å°”å¾·ç§»åŠ¨å¹³å‡ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.rmaWithAlpha()](#F.rmaWithAlpha) | è‡ªå®šä¹‰å¹³æ»‘å› å­RMA | ğŸ“Š ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.dema()](#F.dema) | åŒé‡æŒ‡æ•°ç§»åŠ¨å¹³å‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.tema()](#F.tema) | ä¸‰é‡æŒ‡æ•°ç§»åŠ¨å¹³å‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.hma()](#F.hma) | èµ«å°”ç§»åŠ¨å¹³å‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.tma()](#F.tma) | ä¸‰è§’ç§»åŠ¨å¹³å‡ï¼ˆSMA of SMAï¼‰ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.lsma()](#F.lsma) | æœ€å°äºŒä¹˜ç§»åŠ¨å¹³å‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.jma()](#F.jma) | Jurikç§»åŠ¨å¹³å‡ | ğŸ“ ä¸­ç­‰ | â­â­â­ å¤æ‚ |
| [F.t3()](#F.t3) | T3ç§»åŠ¨å¹³å‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.kama()](#F.kama) | è‡ªé€‚åº”ç§»åŠ¨å¹³å‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.trima()](#F.trima) | ä¸‰è§’ç§»åŠ¨å¹³å‡çº¿ | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |
| [F.mcginley()](#F.mcginley) | McGinleyåŠ¨æ€å¹³å‡ | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |
| [F.edsma()](#F.edsma) | EhlersåŠ¨æ€å¹³æ»‘ç§»åŠ¨å¹³å‡ | ğŸ“ ä½ | â­â­â­ å¤æ‚ |
| [F.vama()](#F.vama) | æˆäº¤é‡åŠ æƒç§»åŠ¨å¹³å‡ | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |

### ğŸ“Š æŠ€æœ¯æŒ‡æ ‡ç±»ï¼ˆ11ä¸ªæ–¹æ³•ï¼‰
| æ–¹æ³• | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ | å¤æ‚åº¦ |
|------|------|---------|-------|
| [F.macd()](#F.macd) | MACDæŒ‡æ ‡ | ğŸ”¥ æé«˜ | â­â­ ä¸­ç­‰ |
| [F.rsi()](#F.rsi) | ç›¸å¯¹å¼ºå¼±æŒ‡æ•° | ğŸ”¥ æé«˜ | â­â­ ä¸­ç­‰ |
| [F.boll()](#F.boll) | å¸ƒæ—å¸¦ | ğŸ”¥ æé«˜ | â­â­ ä¸­ç­‰ |
| [F.kdj()](#F.kdj) | KDJæŒ‡æ ‡ | ğŸ”¥ é«˜ | â­â­ ä¸­ç­‰ |
| [F.cci()](#F.cci) | é¡ºåŠ¿æŒ‡æ ‡ | ğŸ“Š é«˜ | â­â­ ä¸­ç­‰ |
| [F.mtm()](#F.mtm) | åŠ¨é‡æŒ‡æ ‡ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.roc()](#F.roc) | å˜åŠ¨ç‡ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.wr()](#F.wr) | å¨å»‰æŒ‡æ ‡ | ğŸ“Š é«˜ | â­â­ ä¸­ç­‰ |
| [F.stochastic()](#F.stochastic) | éšæœºæŒ‡æ ‡ | ğŸ“Š é«˜ | â­â­ ä¸­ç­‰ |
| [F.dmi()](#F.dmi) | åŠ¨å‘æŒ‡æ•° | ğŸ“ ä¸­ç­‰ | â­â­â­ å¤æ‚ |
| [F.adxWithRMA()](#F.adxWithRMA) | ADXæŒ‡æ ‡ | ğŸ“ ä¸­ç­‰ | â­â­â­ å¤æ‚ |
| [F.trix()](#F.trix) | ä¸‰é‡æŒ‡æ•°å¹³æ»‘æŒ‡æ ‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.brar()](#F.brar) | äººæ°”æ„æ„¿æŒ‡æ ‡ | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |
| [F.vr()](#F.vr) | æˆäº¤é‡å˜å¼‚ç‡ | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |
| [F.psy()](#F.psy) | å¿ƒç†çº¿ | ğŸ“ ä½ | â­ ç®€å• |

### ğŸ“ˆ ä»·é‡åˆ†æç±»ï¼ˆ6ä¸ªæ–¹æ³•ï¼‰
| æ–¹æ³• | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ | å¤æ‚åº¦ |
|------|------|---------|-------|
| [F.obv()](#F.obv) | èƒ½é‡æ½®æŒ‡æ ‡ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.emv()](#F.emv) | ç®€æ˜“æ³¢åŠ¨æŒ‡æ ‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.vo()](#F.vo) | é‡ä»·æŒ‡æ ‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.mfi()](#F.mfi) | èµ„é‡‘æµé‡æŒ‡æ ‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.moneyFlow()](#F.moneyFlow) | èµ„é‡‘æµé‡ | ğŸ“ ä½ | â­ ç®€å• |
| [F.mf()](#F.mf) | å¸‚åœºä¿ƒè¿›æŒ‡æ•°/èµ„é‡‘æµ | ğŸ“ ä½ | â­ ç®€å• |

### ğŸŒŠ æ³¢åŠ¨ç‡åˆ†æç±»ï¼ˆ5ä¸ªæ–¹æ³•ï¼‰
| æ–¹æ³• | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ | å¤æ‚åº¦ |
|------|------|---------|-------|
| [F.atr()](#F.atr) | å¹³å‡çœŸå®æ³¢å¹… | ğŸ”¥ æé«˜ | â­â­ ä¸­ç­‰ |
| [F.tr()](#F.tr) | çœŸå®æ³¢å¹… | ğŸ”¥ é«˜ | â­ ç®€å• |
| [F.atrWithRMA()](#F.atrWithRMA) | RMAå¹³æ»‘ATR | ğŸ“Š é«˜ | â­â­ ä¸­ç­‰ |
| [F.std()](#F.std) | æ ‡å‡†å·® | ğŸ“Š é«˜ | â­â­ ä¸­ç­‰ |
| [F.calcVolatility()](#F.calcVolatility) | å¹´åŒ–æ³¢åŠ¨ç‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |

### ğŸ“Š ç»Ÿè®¡åˆ†æç±»ï¼ˆ9ä¸ªæ–¹æ³•ï¼‰
| æ–¹æ³• | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ | å¤æ‚åº¦ |
|------|------|---------|-------|
| [F.attr()](#F.attr) | å±æ€§æå– | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.hhv()](#F.hhv) | æœ€é«˜å€¼ | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.llv()](#F.llv) | æœ€ä½å€¼ | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.avg()](#F.avg) | å¹³å‡å€¼ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.high()](#F.high) | æ•°ç»„æœ€é«˜å€¼ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.low()](#F.low) | æ•°ç»„æœ€ä½å€¼ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.slope()](#F.slope) | çº¿æ€§å›å½’æ–œç‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.linreg()](#F.linreg) | çº¿æ€§å›å½’å€¼ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.bias()](#F.bias) | ä¹–ç¦»ç‡ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |

### ğŸ”„ ä¿¡å·åˆ†æç±»ï¼ˆ4ä¸ªæ–¹æ³•ï¼‰
| æ–¹æ³• | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ | å¤æ‚åº¦ |
|------|------|---------|-------|
| [F.cross()](#F.cross) | äº¤å‰æ£€æµ‹ | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.throughUp()](#F.throughUp) | ä¸Šç©¿æ£€æµ‹ | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.throughDown()](#F.throughDown) | ä¸‹ç©¿æ£€æµ‹ | ğŸ”¥ æé«˜ | â­ ç®€å• |
| [F.getTrend()](#F.getTrend) | è¶‹åŠ¿åˆ¤æ–­ | ğŸ“Š é«˜ | â­â­ ä¸­ç­‰ |

### ğŸ§® ç‰¹æ®Šå·¥å…·ç±»ï¼ˆ7ä¸ªæ–¹æ³•ï¼‰
| æ–¹æ³• | åŠŸèƒ½ | ä½¿ç”¨é¢‘ç‡ | å¤æ‚åº¦ |
|------|------|---------|-------|
| [F.call()](#F.call) | åŠ¨æ€è°ƒç”¨ | ğŸ“Š é«˜ | â­ ç®€å• |
| [F.donchianChannel()](#F.donchianChannel) | å”å¥‡å®‰é€šé“ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.fibonacciRetracement()](#F.fibonacciRetracement) | æ–æ³¢é‚£å¥‘å›è°ƒä½ | ğŸ“ ä¸­ç­‰ | â­â­ ä¸­ç­‰ |
| [F.sar()](#F.sar) | æŠ›ç‰©è½¬å‘ | ğŸ“ ä¸­ç­‰ | â­â­â­ å¤æ‚ |
| [F.kijunV2()](#F.kijunV2) | æ”¹è¿›åŸºå‡†çº¿ | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |
| [F.asi()](#F.asi) | æŒ¯åŠ¨å‡é™æŒ‡æ ‡ | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |
| [F.dma()](#F.dma) | å¹³å‡çº¿å·® | ğŸ“ ä½ | â­â­ ä¸­ç­‰ |

## ğŸ”§ æ ¸å¿ƒå·¥å…·æ–¹æ³•

### F.attr() - å±æ€§æå–

ä»å¯¹è±¡æ•°ç»„ä¸­æå–æŒ‡å®šå±æ€§çš„å€¼ï¼Œæ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„Fæ–¹æ³•ä¹‹ä¸€ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.attr(list, attr)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | å¯¹è±¡æ•°ç»„ |
| `attr` | string | âœ… | å±æ€§åç§° |

#### æ”¯æŒçš„è®¡ç®—å±æ€§
```javascript
// Kçº¿åŸºç¡€å±æ€§
F.attr(dataList, 'open')      // å¼€ç›˜ä»·æ•°ç»„
F.attr(dataList, 'high')      // æœ€é«˜ä»·æ•°ç»„
F.attr(dataList, 'low')       // æœ€ä½ä»·æ•°ç»„
F.attr(dataList, 'close')     // æ”¶ç›˜ä»·æ•°ç»„
F.attr(dataList, 'volume')    // æˆäº¤é‡æ•°ç»„
F.attr(dataList, 'turnover')  // æˆäº¤é¢æ•°ç»„

// Kçº¿ç»„åˆè®¡ç®—å±æ€§
F.attr(dataList, 'hl2')       // (æœ€é«˜ä»·+æœ€ä½ä»·) / 2
F.attr(dataList, 'oc2')       // (å¼€ç›˜ä»·+æ”¶ç›˜ä»·) / 2  
F.attr(dataList, 'hlc3')      // (æœ€é«˜ä»·+æœ€ä½ä»·+æ”¶ç›˜ä»·) / 3
F.attr(dataList, 'ohl3')      // (æœ€é«˜ä»·+æœ€ä½ä»·+å¼€ç›˜ä»·) / 3
F.attr(dataList, 'ohlc4')     // (æœ€é«˜ä»·+æœ€ä½ä»·+å¼€ç›˜ä»·+æ”¶ç›˜ä»·) / 4
F.attr(dataList, 'percentage') // æ¶¨è·Œå¹…ç™¾åˆ†æ¯”

// æŒ‡æ ‡ç»“æœå±æ€§æå–
macdResult = F.macd(dataList, 12, 26, 9)
F.attr(macdResult, 'dif')     // æå–DIFå€¼
F.attr(macdResult, 'dea')     // æå–DEAå€¼
F.attr(macdResult, 'macd')    // æå–MACDå€¼
```

#### å®ç”¨ç¤ºä¾‹
```javascript
//@name=å¤šæ•°æ®æºå¯¹æ¯”
//@position=main
//@version=1

// æå–ä¸åŒç±»å‹çš„ä»·æ ¼æ•°æ®
closeData = F.attr(dataList, 'close')      // æ”¶ç›˜ä»·
hl2Data = F.attr(dataList, 'hl2')          // ä¸­é—´ä»·
hlc3Data = F.attr(dataList, 'hlc3')        // å…¸å‹ä»·
ohlc4Data = F.attr(dataList, 'ohlc4')      // å¹³å‡ä»·

// åˆ†åˆ«è®¡ç®—MA
ma_close = F.ma(dataList, 20, 'close')
ma_hl2 = F.ma(dataList, 20, 'hl2')  
ma_hlc3 = F.ma(dataList, 20, 'hlc3')

// æ ·å¼å’Œç»˜å›¾
closeStyle = S.line('#FF0000', 2, 'solid', title='æ”¶ç›˜ä»·MA')
hl2Style = S.line('#00FF00', 1, 'dashed', title='ä¸­é—´ä»·MA')
hlc3Style = S.line('#0000FF', 1, 'dotted', title='å…¸å‹ä»·MA')

D.line(ma_close, closeStyle)
D.line(ma_hl2, hl2Style)
D.line(ma_hlc3, hlc3Style)
```

## ğŸ“ˆ ç§»åŠ¨å¹³å‡æ–¹æ³•

### F.ma() - ç®€å•ç§»åŠ¨å¹³å‡

è®¡ç®—ç®€å•ç§»åŠ¨å¹³å‡ï¼ˆSimple Moving Averageï¼‰ï¼Œæœ€åŸºç¡€ä¹Ÿæ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„å¹³å‡çº¿æŒ‡æ ‡ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.ma(list, period, attr?)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | Kçº¿æ•°æ®æ•°ç»„æˆ–æ•°å€¼æ•°ç»„ |
| `period` | number | âœ… | è®¡ç®—å‘¨æœŸï¼ˆâ‰¥1ï¼‰ |
| `attr` | string | âŒ | å±æ€§åç§°ï¼ˆä»…å¯¹è±¡æ•°ç»„éœ€è¦ï¼‰ |

#### è¿”å›å€¼
è¿”å›æ•°ç»„ï¼Œä¸è¶³å‘¨æœŸçš„ä½ç½®è¿”å›nullã€‚

#### åŸºç¡€ç¤ºä¾‹
```javascript
// åŸºç¡€ç”¨æ³•
ma20 = F.ma(dataList, 20, 'close')       // 20å‘¨æœŸæ”¶ç›˜ä»·MA
ma50 = F.ma(dataList, 50, 'hlc3')        // 50å‘¨æœŸå…¸å‹ä»·MA

// æ•°å€¼æ•°ç»„ç”¨æ³•
prices = [100, 101, 99, 102, 105, 103]
ma3 = F.ma(prices, 3)                    // ç›´æ¥å¯¹æ•°å€¼æ•°ç»„è®¡ç®—MA
```

#### å®æˆ˜ç¤ºä¾‹ - ç»å…¸åŒå‡çº¿ç³»ç»Ÿ
```javascript
//@name=åŒå‡çº¿ç³»ç»Ÿ
//@position=main
//@version=1

// å‚æ•°å®šä¹‰
fastPeriod = I.int(5, 'å¿«çº¿å‘¨æœŸ', 1, 50)
slowPeriod = I.int(20, 'æ…¢çº¿å‘¨æœŸ', 5, 200)
source = I.select('close', SOURCE, 'æ•°æ®æº')

// æ ·å¼å®šä¹‰
fastStyle = S.line('#FF0000', 2, 'solid', title='å¿«çº¿')
slowStyle = S.line('#0000FF', 2, 'solid', title='æ…¢çº¿')

// è®¡ç®—ç§»åŠ¨å¹³å‡
fastMA = F.ma(dataList, fastPeriod, source)
slowMA = F.ma(dataList, slowPeriod, source)

// ä¿¡å·è®¡ç®—
buySignals = F.throughUp(fastMA, slowMA)     // é‡‘å‰ä¿¡å·
sellSignals = F.throughDown(fastMA, slowMA)  // æ­»å‰ä¿¡å·

// ç»˜åˆ¶å›¾å½¢
D.line(fastMA, fastStyle)
D.line(slowMA, slowStyle)

// è¾“å‡º
setPrecision('price')
O.tools('å¿«çº¿MA' + fastPeriod, fastMA, fastStyle)
O.tools('æ…¢çº¿MA' + slowPeriod, slowMA, slowStyle)
```

### F.ema() - æŒ‡æ•°ç§»åŠ¨å¹³å‡

è®¡ç®—æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼ˆExponential Moving Averageï¼‰ï¼Œå¯¹è¿‘æœŸä»·æ ¼èµ‹äºˆæ›´é«˜æƒé‡ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.ema(list, period, attr?)
```

#### ç‰¹ç‚¹è¯´æ˜
- **æ›´æ•æ„Ÿ**: æ¯”SMAå¯¹ä»·æ ¼å˜åŒ–ååº”æ›´å¿«
- **æ— æ»å**: å‡å°‘ä¼ ç»ŸMAçš„æ»åæ€§
- **å¹³æ»‘æ€§**: ä¿æŒè¾ƒå¥½çš„å¹³æ»‘æ•ˆæœ

#### ç¤ºä¾‹å¯¹æ¯”
```javascript
// EMA vs MA å¯¹æ¯”
ma20 = F.ma(dataList, 20, 'close')       // ä¼ ç»Ÿç§»åŠ¨å¹³å‡
ema20 = F.ema(dataList, 20, 'close')     // æŒ‡æ•°ç§»åŠ¨å¹³å‡

// EMAå¯¹ä»·æ ¼å˜åŒ–æ›´æ•æ„Ÿï¼Œæ›´å¿«å“åº”è¶‹åŠ¿å˜åŒ–
```

### F.sma() - å¹³æ»‘ç§»åŠ¨å¹³å‡

è®¡ç®—å¹³æ»‘ç§»åŠ¨å¹³å‡ï¼ˆSmoothed Moving Averageï¼‰ï¼Œä¹Ÿç§°ä¸ºä¿®æ­£çš„ç®€å•ç§»åŠ¨å¹³å‡ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.sma(list, period, attr?)
```

#### ç‰¹ç‚¹è¯´æ˜
- **æ›´å¹³æ»‘**: æ¯”EMAæ›´å¹³æ»‘ï¼Œå‡å°‘å™ªéŸ³
- **é€‚ä¸­æ•æ„Ÿåº¦**: ä»‹äºMAå’ŒEMAä¹‹é—´
- **è¶‹åŠ¿è·Ÿè¸ª**: é€‚åˆè¯†åˆ«ä¸­é•¿æœŸè¶‹åŠ¿

## ğŸ“Š æ ¸å¿ƒæŠ€æœ¯æŒ‡æ ‡

### F.macd() - MACDæŒ‡æ ‡

è®¡ç®—MACDï¼ˆMoving Average Convergence Divergenceï¼‰æŒ‡æ ‡ï¼ŒåŒ…å«DIFã€DEAå’ŒMACDæŸ±çŠ¶å›¾ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.macd(list, fast, slow, signal)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | Kçº¿æ•°æ®æ•°ç»„ |
| `fast` | number | âœ… | å¿«çº¿å‘¨æœŸï¼ˆå»ºè®®12ï¼‰ |
| `slow` | number | âœ… | æ…¢çº¿å‘¨æœŸï¼ˆå»ºè®®26ï¼‰ |  
| `signal` | number | âœ… | ä¿¡å·çº¿å‘¨æœŸï¼ˆå»ºè®®9ï¼‰ |

#### è¿”å›å€¼ç»“æ„
è¿”å›å¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å«ï¼š
```javascript
{
    dif: number,    // DIFå€¼ï¼ˆå¿«çº¿-æ…¢çº¿ï¼‰
    dea: number,    // DEAå€¼ï¼ˆDIFçš„ä¿¡å·çº¿ï¼‰
    macd: number    // MACDå€¼ï¼ˆDIF-DEAï¼‰
}
```

#### å®Œæ•´ç¤ºä¾‹
```javascript
//@name=MACDä¸“ä¸šç‰ˆ
//@position=vice
//@version=1

// å‚æ•°è®¾ç½®
fastPeriod = I.int(12, 'å¿«çº¿å‘¨æœŸ', 1, 50)
slowPeriod = I.int(26, 'æ…¢çº¿å‘¨æœŸ', 1, 100)
signalPeriod = I.int(9, 'DEAå‘¨æœŸ', 1, 50)

// æ ·å¼å®šä¹‰
difStyle = S.line('#FF9900', 1, 'solid', title='DIFçº¿')
deaStyle = S.line('#0066CC', 1, 'solid', title='DEAçº¿')
zeroStyle = S.line('#999999', 1, 'solid', title='é›¶è½´çº¿')

// MACDæŸ±çŠ¶å›¾æ ·å¼
macdBullUp = S.bar('#00C851', 'stroke', title='å¤šå¤´å¢å¼º')
macdBullDown = S.bar('#00C851', 'fill', title='å¤šå¤´å‡å¼±')
macdBearUp = S.bar('#FF4444', 'stroke', title='ç©ºå¤´å‡å¼±')  
macdBearDown = S.bar('#FF4444', 'fill', title='ç©ºå¤´å¢å¼º')

// è®¡ç®—MACD
macdResult = F.macd(dataList, fastPeriod, slowPeriod, signalPeriod)
difData = F.attr(macdResult, 'dif')
deaData = F.attr(macdResult, 'dea')
macdData = F.attr(macdResult, 'macd')

// ç»˜åˆ¶é›¶è½´çº¿
D.hline(0, zeroStyle)

// åŠ¨æ€æŸ±çŠ¶å›¾ç»˜åˆ¶
D.bar(macdData, 0, ({value, prev}) => {
    if (value >= 0) {
        // å¤šå¤´åŒºåŸŸ
        return value >= prev ? macdBullUp : macdBullDown
    } else {
        // ç©ºå¤´åŒºåŸŸ  
        return value >= prev ? macdBearUp : macdBearDown
    }
})

// ç»˜åˆ¶DIFå’ŒDEAçº¿
D.line(difData, difStyle)
D.line(deaData, deaStyle)

// ä¿¡å·è®¡ç®—
buySignals = F.throughUp(difData, deaData)
sellSignals = F.throughDown(difData, deaData)

// è¾“å‡ºè®¾ç½®
setPrecision(4)
O.tools('DIF', difData, difStyle)
O.tools('DEA', deaData, deaStyle)
O.tools('MACD', macdData, {color: '#666666'})
```

### F.rsi() - ç›¸å¯¹å¼ºå¼±æŒ‡æ•°

è®¡ç®—RSIï¼ˆRelative Strength Indexï¼‰æŒ‡æ ‡ï¼Œè¡¡é‡ä»·æ ¼å˜åŠ¨çš„é€Ÿåº¦å’Œå¼ºåº¦ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.rsi(list, period)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | Kçº¿æ•°æ®æ•°ç»„ |
| `period` | number | âœ… | è®¡ç®—å‘¨æœŸï¼ˆå»ºè®®14ï¼‰ |

#### è¿”å›å€¼
è¿”å›æ•°ç»„ï¼Œæ•°å€¼èŒƒå›´0-100ï¼Œä¸è¶³å‘¨æœŸçš„ä½ç½®è¿”å›nullã€‚

#### åº”ç”¨æŒ‡å¯¼
- **è¶…ä¹°åŒºåŸŸ**: RSI > 70ï¼Œè€ƒè™‘å–å‡º
- **è¶…å–åŒºåŸŸ**: RSI < 30ï¼Œè€ƒè™‘ä¹°å…¥
- **ä¸­æ€§åŒºåŸŸ**: 30-70ï¼Œè§‚æœ›æˆ–è¶‹åŠ¿è·Ÿè¸ª

#### å®Œæ•´ç¤ºä¾‹
```javascript
//@name=RSIæŒ‡æ ‡ç³»ç»Ÿ
//@position=vice
//@version=1

// å‚æ•°å®šä¹‰
rsiPeriod = I.int(14, 'RSIå‘¨æœŸ', 1, 50)
overbought = I.int(70, 'è¶…ä¹°çº¿', 50, 100)
oversold = I.int(30, 'è¶…å–çº¿', 0, 50)
showSignals = I.bool(true, 'æ˜¾ç¤ºä¿¡å·')

// æ ·å¼å®šä¹‰
rsiStyle = S.line('#FF6D00', 2, 'solid', title='RSIçº¿')
obStyle = S.line('#FF4444', 1, 'dashed', title='è¶…ä¹°çº¿')
osStyle = S.line('#4CAF50', 1, 'dashed', title='è¶…å–çº¿')
centerStyle = S.line('#999999', 1, 'dotted', title='ä¸­çº¿')

// ä¿¡å·æ ·å¼
buySignalStyle = S.shape('arrowUp', '#4CAF50', 12, 'value', title='ä¹°å…¥ä¿¡å·')
sellSignalStyle = S.shape('arrowDown', '#FF4444', 12, 'value', title='å–å‡ºä¿¡å·')

// è®¡ç®—RSI
rsiData = F.rsi(dataList, rsiPeriod)

// ä¿¡å·è®¡ç®—
buySignals = F.throughUp(rsiData, oversold)    // RSIä»è¶…å–åŒºä¸Šç©¿
sellSignals = F.throughDown(rsiData, overbought) // RSIä»è¶…ä¹°åŒºä¸‹ç©¿

// ç»˜åˆ¶æ°´å¹³çº¿
D.hline(overbought, obStyle)
D.hline(50, centerStyle)  
D.hline(oversold, osStyle)

// ç»˜åˆ¶RSIçº¿
D.line(rsiData, rsiStyle)

// ç»˜åˆ¶ä¿¡å·
if (showSignals) {
    D.shape(buySignals, buySignalStyle)
    D.shape(sellSignals, sellSignalStyle)
}

// å‰¯å›¾è®¾ç½®
setMax(100)
setMin(0)
setPrecision(2)

// è¾“å‡º
O.tools('RSI' + rsiPeriod, rsiData, rsiStyle)
```

### F.boll() - å¸ƒæ—å¸¦

è®¡ç®—Bollinger Bandsï¼ŒåŒ…å«ä¸­è½¨ã€ä¸Šè½¨å’Œä¸‹è½¨ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.boll(list, period, multiplier)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | Kçº¿æ•°æ®æ•°ç»„ |
| `period` | number | âœ… | è®¡ç®—å‘¨æœŸï¼ˆå»ºè®®20ï¼‰ |
| `multiplier` | number | âœ… | æ ‡å‡†å·®å€æ•°ï¼ˆå»ºè®®2ï¼‰ |

#### è¿”å›å€¼ç»“æ„
```javascript
{
    mid: number,    // ä¸­è½¨ï¼ˆç§»åŠ¨å¹³å‡ï¼‰
    ub: number,     // ä¸Šè½¨ï¼ˆä¸­è½¨+æ ‡å‡†å·®*å€æ•°ï¼‰
    lb: number      // ä¸‹è½¨ï¼ˆä¸­è½¨-æ ‡å‡†å·®*å€æ•°ï¼‰
}
```

#### å®Œæ•´ç¤ºä¾‹
```javascript
//@name=å¸ƒæ—å¸¦ç³»ç»Ÿ
//@position=main
//@version=1

// å‚æ•°å®šä¹‰
bollPeriod = I.int(20, 'å¸ƒæ—å‘¨æœŸ', 5, 100)
bollMultiplier = I.float(2.0, 'æ ‡å‡†å·®å€æ•°', 0.5, 5.0, 0.1)
showFill = I.bool(true, 'æ˜¾ç¤ºå¡«å……')

// æ ·å¼å®šä¹‰
midStyle = S.line('#FFB300', 2, 'solid', title='ä¸­è½¨')
upperStyle = S.line('#E91E63', 1, 'solid', title='ä¸Šè½¨')
lowerStyle = S.line('#E91E63', 1, 'solid', title='ä¸‹è½¨')
fillStyle = S.area('rgba(233, 30, 99, 0.1)', showFill, title='é€šé“å¡«å……')

// è®¡ç®—å¸ƒæ—å¸¦
bollResult = F.boll(dataList, bollPeriod, bollMultiplier)
midData = F.attr(bollResult, 'mid')
upperData = F.attr(bollResult, 'ub')
lowerData = F.attr(bollResult, 'lb')

// ç»˜åˆ¶å¡«å……åŒºåŸŸï¼ˆå¦‚æœå¯ç”¨ï¼‰
if (showFill) {
    D.area(upperData, lowerData, fillStyle)
}

// ç»˜åˆ¶å¸ƒæ—å¸¦çº¿æ¡
D.line(upperData, upperStyle)
D.line(midData, midStyle)
D.line(lowerData, lowerStyle)

// ä¿¡å·è®¡ç®—ï¼ˆå¯é€‰ï¼‰
// ä»·æ ¼çªç ´ä¸Šè½¨ = å¼ºåŠ¿ä¿¡å·
// ä»·æ ¼è·Œç ´ä¸‹è½¨ = å¼±åŠ¿ä¿¡å·
closeData = F.attr(dataList, 'close')
upperBreak = F.throughUp(closeData, upperData)
lowerBreak = F.throughDown(closeData, lowerData)

// è¾“å‡ºè®¾ç½®
setPrecision('price')
O.tools('BOLLä¸Šè½¨', upperData, upperStyle)
O.tools('BOLLä¸­è½¨', midData, midStyle)
O.tools('BOLLä¸‹è½¨', lowerData, lowerStyle)
```

## ğŸ“Š ä¿¡å·åˆ†ææ–¹æ³•

### F.cross() - äº¤å‰æ£€æµ‹

æ£€æµ‹ä¸¤æ¡çº¿çš„äº¤å‰æƒ…å†µï¼Œè¿”å›äº¤å‰ç‚¹ä¿¡æ¯ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.cross(list1, list2, attr?)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list1` | array | âœ… | ç¬¬ä¸€æ¡çº¿æ•°æ® |
| `list2` | array/number | âœ… | ç¬¬äºŒæ¡çº¿æ•°æ®æˆ–å›ºå®šå€¼ |
| `attr` | string | âŒ | å±æ€§åç§° |

#### è¿”å›å€¼ç»“æ„
äº¤å‰æ—¶è¿”å›ï¼š
```javascript
{
    val1: number,      // ç¬¬ä¸€æ¡çº¿çš„å€¼
    val2: number,      // ç¬¬äºŒæ¡çº¿çš„å€¼
    type: string       // 'up'(ä¸Šç©¿) æˆ– 'down'(ä¸‹ç©¿)
}
```
æ— äº¤å‰æ—¶è¿”å›nullã€‚

### F.throughUp() - ä¸Šç©¿æ£€æµ‹

æ£€æµ‹ç¬¬ä¸€æ¡çº¿ä¸Šç©¿ç¬¬äºŒæ¡çº¿çš„æƒ…å†µã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.throughUp(list1, list2, attr?)
```

#### è¿”å›å€¼
ä¸Šç©¿æ—¶è¿”å› `{val1, val2}`ï¼Œå¦åˆ™è¿”å›nullã€‚

### F.throughDown() - ä¸‹ç©¿æ£€æµ‹

æ£€æµ‹ç¬¬ä¸€æ¡çº¿ä¸‹ç©¿ç¬¬äºŒæ¡çº¿çš„æƒ…å†µã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.throughDown(list1, list2, attr?)
```

#### ä¿¡å·æ£€æµ‹ç¤ºä¾‹
```javascript
//@name=MAäº¤å‰ä¿¡å·ç³»ç»Ÿ
//@position=main
//@version=1

// å‚æ•°å®šä¹‰
fastPeriod = I.int(5, 'å¿«çº¿å‘¨æœŸ')
slowPeriod = I.int(20, 'æ…¢çº¿å‘¨æœŸ')
signalThreshold = I.int(50, 'ä¿¡å·é˜ˆå€¼')

// è®¡ç®—å‡çº¿
fastMA = F.ma(dataList, fastPeriod, 'close')
slowMA = F.ma(dataList, slowPeriod, 'close')

// ä¿¡å·æ£€æµ‹
crossSignals = F.cross(fastMA, slowMA)           // æ‰€æœ‰äº¤å‰
buySignals = F.throughUp(fastMA, slowMA)         // é‡‘å‰ä¿¡å·
sellSignals = F.throughDown(fastMA, slowMA)      // æ­»å‰ä¿¡å·

// ä»·æ ¼çªç ´æ£€æµ‹  
closeData = F.attr(dataList, 'close')
priceBreakUp = F.throughUp(closeData, signalThreshold)
priceBreakDown = F.throughDown(closeData, signalThreshold)

// æ ·å¼å’Œç»˜åˆ¶
fastStyle = S.line('#FF0000', 2, 'solid', title='å¿«çº¿')
slowStyle = S.line('#0000FF', 2, 'solid', title='æ…¢çº¿')
buyStyle = S.shape('arrowUp', '#00FF00', 12, 'lowDown', title='ä¹°å…¥')
sellStyle = S.shape('arrowDown', '#FF0000', 12, 'highUp', title='å–å‡º')

D.line(fastMA, fastStyle)
D.line(slowMA, slowStyle)
D.shape(buySignals, buyStyle)
D.shape(sellSignals, sellStyle)

// ä¿¡å·ç»Ÿè®¡è¾“å‡º
O.print('é‡‘å‰ä¿¡å·æ•°é‡: ' + buySignals.filter(s => s !== null).length)
O.print('æ­»å‰ä¿¡å·æ•°é‡: ' + sellSignals.filter(s => s !== null).length)
```

## ğŸ§® F.call() - åŠ¨æ€æ–¹æ³•è°ƒç”¨

æŒ‰æ–¹æ³•åå­—ç¬¦ä¸²åŠ¨æ€è°ƒç”¨Fæ–¹æ³•ï¼Œå®ç°çµæ´»çš„ç®—æ³•åˆ‡æ¢ã€‚

### è¯­æ³•æ ¼å¼
```javascript
F.call(methodName, ...args)
```

### å‚æ•°è¯´æ˜
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `methodName` | string | âœ… | æ–¹æ³•åï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰ |
| `...args` | any | âœ… | å¯¹åº”æ–¹æ³•çš„å‚æ•° |

### æ”¯æŒçš„æ–¹æ³•å
æ‰€æœ‰Fæ–¹æ³•éƒ½æ”¯æŒåŠ¨æ€è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š
- `'ma'`, `'ema'`, `'sma'`, `'wma'`, `'rma'`
- `'rsi'`, `'macd'`, `'boll'`, `'kdj'`
- `'atr'`, `'tr'`, `'std'`
- ç­‰ç­‰...

### å®ç”¨ç¤ºä¾‹
```javascript
//@name=é€šç”¨æŒ‡æ ‡ç³»ç»Ÿ
//@position=main
//@version=1

// ç”¨æˆ·å¯é€‰çš„ç®—æ³•ç±»å‹
maType = I.select('EMA', ['MA', 'EMA', 'SMA', 'WMA', 'RMA'], 'å‡çº¿ç±»å‹')
period = I.int(20, 'å‘¨æœŸ', 1, 200)
source = I.select('close', SOURCE, 'æ•°æ®æº')

// åŠ¨æ€è°ƒç”¨å¯¹åº”çš„Fæ–¹æ³•
maResult = F.call(maType, dataList, period, source)

// æ ·å¼å’Œç»˜åˆ¶
maStyle = S.line('#FF6600', 2, 'solid', title=maType + 'çº¿')
D.line(maResult, maStyle)

// å¤šæŒ‡æ ‡åŠ¨æ€åˆ‡æ¢ç¤ºä¾‹
oscType = I.select('RSI', ['RSI', 'CCI', 'MTM'], 'æŒ¯è¡æŒ‡æ ‡')
oscPeriod = I.int(14, 'æŒ¯è¡æŒ‡æ ‡å‘¨æœŸ')

let oscResult;
switch(oscType) {
    case 'RSI':
        oscResult = F.call('rsi', dataList, oscPeriod);
        break;
    case 'CCI':
        oscResult = F.call('cci', dataList, oscPeriod);
        break;
    case 'MTM':
        oscResult = F.call('mtm', dataList, oscPeriod, 'close');
        break;
}

// è¾“å‡º
O.tools(maType + period, maResult, maStyle)
```

## ğŸ’¡ ä½¿ç”¨æœ€ä½³å®è·µ

### 1. å‚æ•°é¡ºåºè§„èŒƒ
```javascript
// âœ… æ­£ç¡®ï¼šä¸¥æ ¼æŒ‰æ–‡æ¡£é¡ºåº
ma = F.ma(dataList, 20, 'close')          // list, period, attr
rsi = F.rsi(dataList, 14)                 // list, period
macd = F.macd(dataList, 12, 26, 9)        // list, fast, slow, signal

// âŒ é”™è¯¯ï¼šå‚æ•°é¡ºåºé”™è¯¯
ma = F.ma(20, dataList, 'close')          // é”™è¯¯ï¼
rsi = F.rsi(14, dataList)                 // é”™è¯¯ï¼
```

### 2. æ•°æ®ç±»å‹æ£€æŸ¥
```javascript
// âœ… æ­£ç¡®ï¼šç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®
if (dataList && dataList.length > 0) {
    ma = F.ma(dataList, 20, 'close')      // Kçº¿æ•°æ®æ•°ç»„
    rsi = F.rsi(dataList, 14)             // Kçº¿æ•°æ®æ•°ç»„
}

// âŒ é”™è¯¯ï¼šä¼ å…¥é”™è¯¯æ•°æ®ç±»å‹
prices = [100, 101, 102]                 
rsi = F.rsi(prices, 14)                   // é”™è¯¯ï¼RSIéœ€è¦Kçº¿æ•°æ®
```

### 3. è¿”å›å€¼nullå¤„ç†
```javascript
// âœ… æ­£ç¡®ï¼šå¤„ç†nullè¿”å›å€¼
ma = F.ma(dataList, 20, 'close')
maFiltered = ma.filter(val => val !== null)  // è¿‡æ»¤nullå€¼

// æ£€æŸ¥æœ‰æ•ˆæ•°æ®æ•°é‡
O.print('æœ‰æ•ˆMAæ•°æ®ç‚¹: ' + maFiltered.length)

// âœ… æ­£ç¡®ï¼šåœ¨ä½¿ç”¨å‰æ£€æŸ¥
ma.forEach((val, index) => {
    if (val !== null && val > dataList[index].close) {
        // å¤„ç†MAå¤§äºæ”¶ç›˜ä»·çš„æƒ…å†µ
    }
})
```

### 4. æ€§èƒ½ä¼˜åŒ–å»ºè®®
```javascript
// âœ… æ¨èï¼šå¤ç”¨è®¡ç®—ç»“æœ
ma20 = F.ma(dataList, 20, 'close')
// å¤šæ¬¡ä½¿ç”¨ma20ï¼Œè€Œä¸æ˜¯é‡å¤è®¡ç®—

// âœ… æ¨èï¼šåˆç†çš„å‘¨æœŸè®¾ç½®  
ma_short = F.ma(dataList, 5, 'close')     // çŸ­æœŸ
ma_medium = F.ma(dataList, 20, 'close')   // ä¸­æœŸ
ma_long = F.ma(dataList, 60, 'close')     // é•¿æœŸ

// âŒ é¿å…ï¼šè¿‡åº¦è®¡ç®—
for (let i = 1; i <= 100; i++) {
    ma = F.ma(dataList, i, 'close')       // é¿å…å¤§é‡è®¡ç®—
}
```

## ğŸš¨ å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

### é”™è¯¯1ï¼šå‚æ•°é¡ºåºé”™è¯¯
```javascript
// âŒ é”™è¯¯
ma = F.ma(20, dataList, 'close')

// âœ… æ­£ç¡®
ma = F.ma(dataList, 20, 'close')
```

### é”™è¯¯2ï¼šæ•°æ®ç±»å‹ä¸åŒ¹é…
```javascript
// âŒ é”™è¯¯ï¼šä¼ å…¥æ•°å€¼æ•°ç»„ç»™éœ€è¦Kçº¿æ•°æ®çš„æ–¹æ³•
prices = [100, 101, 102]
rsi = F.rsi(prices, 14)                    // é”™è¯¯ï¼

// âœ… æ­£ç¡®ï¼šä¼ å…¥Kçº¿æ•°æ®
rsi = F.rsi(dataList, 14)                  // æ­£ç¡®ï¼
```

### é”™è¯¯3ï¼šå¿½ç•¥è¿”å›çš„nullå€¼
```javascript
// âŒ é”™è¯¯ï¼šç›´æ¥ä½¿ç”¨å¯èƒ½å«nullçš„æ•°æ®
ma = F.ma(dataList, 20, 'close')
max = Math.max(...ma)                      // å¯èƒ½å‡ºé”™ï¼

// âœ… æ­£ç¡®ï¼šè¿‡æ»¤nullå€¼
ma = F.ma(dataList, 20, 'close')
validMA = ma.filter(v => v !== null)
max = Math.max(...validMA)                 // å®‰å…¨ï¼
```

### é”™è¯¯4ï¼šF.callæ–¹æ³•åé”™è¯¯
```javascript
// âŒ é”™è¯¯ï¼šæ–¹æ³•åä¸å­˜åœ¨
result = F.call('invalidMethod', dataList, 20)

// âœ… æ­£ç¡®ï¼šä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•å
result = F.call('ma', dataList, 20, 'close')
result = F.call('ema', dataList, 20, 'close')
```

## ğŸŒŠ æ³¢åŠ¨ç‡åˆ†ææ–¹æ³•

### F.atr() - å¹³å‡çœŸå®æ³¢å¹…

è®¡ç®—ATRï¼ˆAverage True Rangeï¼‰æŒ‡æ ‡ï¼Œè¡¡é‡å¸‚åœºæ³¢åŠ¨æ€§ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.atr(list, period)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | Kçº¿æ•°æ®æ•°ç»„ |
| `period` | number | âœ… | è®¡ç®—å‘¨æœŸï¼ˆå»ºè®®14ï¼‰ |

#### è¿”å›å€¼
è¿”å›æ•°ç»„ï¼ŒATRå€¼ï¼Œä¸è¶³å‘¨æœŸçš„ä½ç½®è¿”å›nullã€‚

#### å®Œæ•´ç¤ºä¾‹
```javascript
//@name=ATRæ­¢æŸç³»ç»Ÿ
//@position=main
//@version=1

// å‚æ•°å®šä¹‰
atrPeriod = I.int(14, 'ATRå‘¨æœŸ', 1, 50)
atrMultiplier = I.float(2.0, 'ATRå€æ•°', 0.5, 5.0, 0.1)

// æ ·å¼å®šä¹‰
stopLossStyle = S.line('#FF4444', 2, 'dashed', title='æ­¢æŸçº¿')
takeProfitStyle = S.line('#00FF00', 2, 'dashed', title='æ­¢ç›ˆçº¿')

// è®¡ç®—ATR
atr = F.atr(dataList, atrPeriod)
closeData = F.attr(dataList, 'close')

// è®¡ç®—æ­¢æŸæ­¢ç›ˆçº¿
stopLoss = closeData.map((close, index) => {
    if (atr[index] !== null) {
        return close - (atr[index] * atrMultiplier)
    }
    return null
})

takeProfit = closeData.map((close, index) => {
    if (atr[index] !== null) {
        return close + (atr[index] * atrMultiplier)
    }
    return null
})

// ç»˜åˆ¶
D.line(stopLoss, stopLossStyle)
D.line(takeProfit, takeProfitStyle)

// è¾“å‡º
setPrecision('price')
O.tools('æ­¢æŸçº¿', stopLoss, stopLossStyle)
O.tools('æ­¢ç›ˆçº¿', takeProfit, takeProfitStyle)
```

## ğŸ“ˆ ä»·é‡åˆ†ææ–¹æ³•

### F.obv() - èƒ½é‡æ½®æŒ‡æ ‡

è®¡ç®—OBVï¼ˆOn-Balance Volumeï¼‰æŒ‡æ ‡ï¼Œåˆ†æä»·æ ¼å’Œæˆäº¤é‡çš„å…³ç³»ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.obv(list)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | Kçº¿æ•°æ®æ•°ç»„ |

#### è¿”å›å€¼
è¿”å›æ•°ç»„ï¼ŒOBVç´¯ç§¯å€¼ã€‚

#### å®Œæ•´ç¤ºä¾‹
```javascript
//@name=OBVé‡ä»·åˆ†æ
//@position=vice
//@version=1

// æ ·å¼å®šä¹‰
obvStyle = S.line('#9C27B0', 2, 'solid', title='OBVçº¿')
obvMaStyle = S.line('#FF9800', 1, 'solid', title='OBVå‡çº¿')

// è®¡ç®—OBV
obv = F.obv(dataList)
obvMa = F.ma(obv, 20)

// ä¿¡å·åˆ†æ
obvSignals = F.cross(obv, obvMa)

// ç»˜åˆ¶
D.line(obv, obvStyle)
D.line(obvMa, obvMaStyle)

// è¾“å‡º
setPrecision(0)
O.tools('OBV', obv, obvStyle)
O.tools('OBV MA20', obvMa, obvMaStyle)
```

## ğŸ“Š ç»Ÿè®¡åˆ†ææ–¹æ³•

### F.hhv() - æœ€é«˜å€¼

è·å–æŒ‡å®šå‘¨æœŸå†…çš„æœ€é«˜å€¼ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.hhv(list, period, attr?)
```

#### å‚æ•°è¯¦è§£
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `list` | array | âœ… | Kçº¿æ•°æ®æ•°ç»„æˆ–æ•°å€¼æ•°ç»„ |
| `period` | number | âœ… | å›çœ‹å‘¨æœŸ |
| `attr` | string | âŒ | å±æ€§åç§° |

#### ç¤ºä¾‹
```javascript
// è·å–20å‘¨æœŸå†…æœ€é«˜ä»·
highestHigh = F.hhv(dataList, 20, 'high')

// è·å–æ•°å€¼æ•°ç»„ä¸­çš„æœ€é«˜å€¼
prices = [100, 105, 98, 112, 95]
maxPrice = F.hhv(prices, 5)
```

### F.llv() - æœ€ä½å€¼

è·å–æŒ‡å®šå‘¨æœŸå†…çš„æœ€ä½å€¼ã€‚

#### è¯­æ³•æ ¼å¼
```javascript
F.llv(list, period, attr?)
```

#### ç¤ºä¾‹åº”ç”¨ - å”å¥‡å®‰é€šé“
```javascript
//@name=å”å¥‡å®‰é€šé“
//@position=main
//@version=1

// å‚æ•°å®šä¹‰
period = I.int(20, 'é€šé“å‘¨æœŸ', 1, 100)

// æ ·å¼å®šä¹‰
upperStyle = S.line('#00FF00', 1, 'solid', title='ä¸Šè½¨')
lowerStyle = S.line('#FF0000', 1, 'solid', title='ä¸‹è½¨')
fillStyle = S.area('rgba(0, 255, 0, 0.1)', title='é€šé“å¡«å……')

// è®¡ç®—å”å¥‡å®‰é€šé“
upperBand = F.hhv(dataList, period, 'high')
lowerBand = F.llv(dataList, period, 'low')

// ç»˜åˆ¶
D.area(upperBand, lowerBand, fillStyle)
D.line(upperBand, upperStyle)
D.line(lowerBand, lowerStyle)

// çªç ´ä¿¡å·
closeData = F.attr(dataList, 'close')
breakoutUp = F.throughUp(closeData, upperBand)
breakoutDown = F.throughDown(closeData, lowerBand)

// è¾“å‡º
setPrecision('price')
O.tools('ä¸Šè½¨', upperBand, upperStyle)
O.tools('ä¸‹è½¨', lowerBand, lowerStyle)
```

## ğŸš€ é«˜çº§åº”ç”¨å®ä¾‹

### å¤šæ—¶é—´æ¡†æ¶RSI
```javascript
//@name=å¤šæ—¶é—´æ¡†æ¶RSI
//@position=vice
//@version=1

// å‚æ•°å®šä¹‰
rsiPeriod = I.int(14, 'RSIå‘¨æœŸ')
showMultiTimeframe = I.bool(true, 'æ˜¾ç¤ºå¤šæ—¶é—´æ¡†æ¶')

// æ ·å¼å®šä¹‰
rsiStyle = S.line('#E91E63', 2, 'solid', title='RSI')
rsiMa = S.line('#2196F3', 1, 'solid', title='RSIå‡çº¿')

// è®¡ç®—RSI
rsi = F.rsi(dataList, rsiPeriod)
rsiSmooth = F.ma(rsi, 5)

// å¤šé‡éªŒè¯ä¿¡å·
rsiOverbought = rsi.map(val => val > 70 ? val : null)
rsiOversold = rsi.map(val => val < 30 ? val : null)

// èƒŒç¦»æ£€æµ‹ï¼ˆç®€åŒ–ç‰ˆï¼‰
priceHigh = F.hhv(dataList, 14, 'high')
rsiHigh = F.hhv(rsi, 14)

// ç»˜åˆ¶
D.line(rsi, rsiStyle)
D.line(rsiSmooth, rsiMa)
D.hline(70, S.line('#FF0000', 1, 'dashed'))
D.hline(30, S.line('#00FF00', 1, 'dashed'))
D.hline(50, S.line('#999999', 1, 'dotted'))

// è®¾ç½®å‰¯å›¾
setMax(100)
setMin(0)
setPrecision(2)

// è¾“å‡º
O.tools('RSI', rsi, rsiStyle)
O.tools('RSIå¹³æ»‘', rsiSmooth, rsiMa)
```

## ğŸ”— ç›¸å…³å†…å®¹

- **æ•°æ®å¤„ç†**: [åŸºç¡€æ¦‚å¿µ](02-åŸºç¡€æ¦‚å¿µå’Œè„šæœ¬ç»“æ„.md#æ•°æ®ç±»å‹ç³»ç»Ÿ) - äº†è§£æ•°æ®ç±»å‹
- **ç»˜å›¾åº”ç”¨**: [Dæ–¹æ³•è¯¦è§£](06-ç»˜å›¾è¾“å‡ºæ–¹æ³•(Dæ–¹æ³•).md) - å°†Fæ–¹æ³•ç»“æœç»˜åˆ¶æˆå›¾
- **å‚æ•°é…ç½®**: [Iæ–¹æ³•è¯¦è§£](03-è¾“å…¥å‚æ•°æ–¹æ³•(Iæ–¹æ³•).md) - Fæ–¹æ³•å‚æ•°çš„ç”¨æˆ·åŒ–è®¾ç½®
- **å®é™…æ¡ˆä¾‹**: [è„šæœ¬æ¡ˆä¾‹åº“](09-å®Œæ•´è„šæœ¬æ¡ˆä¾‹åº“.md) - Fæ–¹æ³•åœ¨å®é™…æŒ‡æ ‡ä¸­çš„åº”ç”¨
- **é”™è¯¯å¤„ç†**: [é”™è¯¯å¤„ç†æŒ‡å—](10-é”™è¯¯å¤„ç†å’Œè°ƒè¯•æŒ‡å—.md) - Fæ–¹æ³•å¸¸è§é”™è¯¯è§£å†³

---
**æç¤º**: Fæ–¹æ³•æ˜¯GainLab Scriptçš„æ ¸å¿ƒï¼Œå…±64ä¸ªè®¡ç®—å‡½æ•°è¦†ç›–æŠ€æœ¯åˆ†æçš„å„ä¸ªæ–¹é¢ã€‚ç†Ÿç»ƒæŒæ¡å¸¸ç”¨Fæ–¹æ³•æ˜¯å¼€å‘é«˜è´¨é‡æŒ‡æ ‡çš„åŸºç¡€ã€‚å»ºè®®ä»åŸºç¡€æ–¹æ³•å¼€å§‹ï¼Œé€æ­¥æŒæ¡æ›´å¤æ‚çš„æŠ€æœ¯æŒ‡æ ‡æ–¹æ³•ã€‚